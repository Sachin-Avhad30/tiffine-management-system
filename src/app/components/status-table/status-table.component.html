<div class="table-wrapper">
  <table class="table-body" mat-table [dataSource]="dataSource" matSort>
    <ng-container matColumnDef="username">
      <th mat-header-cell *matHeaderCellDef mat-sort-header>Name</th>
      <td mat-cell *matCellDef="let element">{{ element.username }}</td>
    </ng-container>
    <ng-container matColumnDef="email">
      <th mat-header-cell *matHeaderCellDef mat-sort-header>Email</th>
      <td mat-cell *matCellDef="let element">{{ element.email }}</td>
    </ng-container>
    <ng-container matColumnDef="contact_number">
      <th mat-header-cell *matHeaderCellDef mat-sort-header>Contact details</th>
      <td mat-cell *matCellDef="let element">{{ element.contact_number }}</td>
    </ng-container>
    <ng-container matColumnDef="organization_name">
      <th mat-header-cell *matHeaderCellDef mat-sort-header>organization</th>
      <td mat-cell *matCellDef="let element">
        @if (!element.role_specific_details.organization_name){
        {{ noOrganization }}
        }@else {
        {{ element.role_specific_details.organization_name }}
        }
      </td>
    </ng-container>
    <ng-container matColumnDef="approval_status">
      <th mat-header-cell *matHeaderCellDef mat-sort-header>Status</th>
      <td mat-cell *matCellDef="let element">
        {{ element.role_specific_details.approval_status }}
      </td>
    </ng-container>
    <ng-container matColumnDef="_id">
      <th mat-header-cell *matHeaderCellDef>Actions</th>
      <td mat-cell *matCellDef="let element">
        <mat-icon
          class="approved"
          (click)="onApprove(element._id)"
          *ngIf="element.role_specific_details.approval_status != 'approved'"
          >check_circle</mat-icon
        >
        <mat-icon
          class="rejected"
          (click)="onReject(element._id)"
          (reasonEmitter)="onReason($event)"
          *ngIf="element.role_specific_details.approval_status != 'rejected'"
          >cancel</mat-icon
        >
      </td>
    </ng-container>

    <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>

    <tr
      mat-row
      *matRowDef="let row; columns: displayedColumns"
      class="hover-row"
    ></tr>
    <tr class="mat-row" *matNoDataRow>
      <td class="mat-cell" colspan="4">
        No data matching the search "{{ searchedQueryNotFound }}"
      </td>
    </tr>
  </table>
  <mat-paginator
    [pageSizeOptions]="[2, 4, 6, 8]"
    [length]="totalItems"
    (page)="onPageChange($event)"
    [pageSize]="pageSize"
    showFirstLastButtons
    aria-label="Select page of periodic elements"
  >
  </mat-paginator>
</div>
